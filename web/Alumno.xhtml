<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>TODO supply a title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <style>

            .ui-datatable .ui-paginator {
                background-color: rgba(  93, 173, 226 ,0.05) !important;
            }
            .ui-datatable .ui-paginator-page{
                background-color: #333333 !important;  
                color: white !important;
            }
            form .columna{
                background-color: rgba(  93, 173, 226 ,0.05) !important;
                color: black;
            }
            form .tabla{
                background-image:url(imagenes/fondos/fondo4.jpg);
                font-size: 13px;
                color: black;
            } 
            body{
                background-image:url(imagenes/fondos/fondo2.jpg);  
            }
            .ui-panel-titlebar /*Para el titulo de panel */
            { 
                background: #3B73B9;  
            } 
            .ui-dialog-titlebar{/*Para el Titulo del formulario Desplegable */
                background-image:url(imagenes/fondos/fondo2.jpg);  
                color: #999999 !important;
            }
            form .btnBo{
                background-color: #999999 !important;
                /*color: black !important;*/

            }
            form .Ac{
                background-color: #999999 !important;
                /*color: black !important;*/

            }
        </style>
    </h:head>
    <h:body>
        <h:form>
        <ui:include src="menu.xhtml" /><br/>
        </h:form>
        <br/>
        <p:growl id="msg" showDetail="true" />
        <h:form id="fo">
            <center>
                <p:panel id="horizontal" style="background-image: url(imagenes/fondos/fondo4.jpg) ;border:#b3d5f5;" header="Agregar" toggleOrientation="horizontal" toggleable="true" collapsed="true">
                    <center>
                        <h:outputLabel value="Nie: " /><p:spacer width="20" height="15"/>
                        <p:inputText value="#{beanAlumno.alumnos.nie}">
                            <p:keyFilter regEx="/[\d\-]/" />
                        </p:inputText>
                        <br /><br/>
                        
                        <h:outputLabel value="Nombre: "/> <p:spacer width="180" height="15" />
                        <h:outputLabel value="Apellido: " /><br/>
                        
                        <p:inputText value="#{beanAlumno.alumnos.nombre}" /><p:spacer width="30" />
                        <p:inputText value="#{beanAlumno.alumnos.apellido}" />
                        <br/><br/>
                        
                        <h:outputLabel value="Email: " /><p:spacer width="20" height="15" />
                        <p:inputText value="#{beanAlumno.alumnos.email}" style="width:  350px;">
                            <p:keyFilter regEx="/[a-z0-9_\.\-@â—†/i" />
                        </p:inputText>
                        <p:spacer width="20" height="15"/>
                        <h:outputLabel value="Direccion: "/>
                        <p:inputText value="#{beanAlumno.alumnos.direccion}" style="width:  350px;" />
                        <br/><br/>
                        
                        <h:outputLabel value="Edad: "/><p:spacer width="20" height="15"/><p:inputText size="1" maxlength="4" value="#{beanAlumno.alumnos.edad}" ><p:keyFilter regEx="/[\d\-]/" /></p:inputText>
                        <p:spacer width="25" />
                        <h:outputLabel value="Fecha de Nacimiento:" /><p:spacer width="20" height="15"/><p:inputMask size="6" mask="99/99/9999" value="#{beanAlumno.alumnos.fechaNacimiento}" />
                        <p:spacer width="25" />
                        <h:outputLabel value="Fecha de resgistro: " /><p:spacer width="20" height="15"/><p:inputMask size="6" mask="99/99/9999" value="#{beanAlumno.alumnos.fechaRegistro}" />
                        <br/><br/>
                        
                        <h:outputLabel value="Escuela: "/><p:spacer width="20"/>
                        <h:selectOneMenu style="width: 170px;" value="#{beanAlumno.alumnos.codigoEscuela.codigoEscuela}">
                            <f:selectItem itemLabel="Escoger Escuela" itemValue=""/>
                            <f:selectItems value="#{beanAlumno.listEs}" var="listEs" itemValue="#{listEs.codigoEscuela}" itemLabel="#{listEs.nombreEscuela}" />
                        </h:selectOneMenu>
                        <p:spacer width="30" />
                        <h:outputLabel value="Grado: "/><p:spacer width="20"/>
                        <h:selectOneMenu style="width: 145px;" value="#{beanAlumno.alumnos.grado.grado}">
                            <f:selectItem itemLabel="Escoger Grado" itemValue=""/>
                            <f:selectItems value="#{beanAlumno.listN}" var="listN" itemValue="#{listN.grado}" itemLabel="#{listN.grado}" />
                        </h:selectOneMenu>
                        <br/><br/>
                        <p:commandButton value="Guardar" actionListener="#{beanAlumno.agregar()}" update="msg,fo,Tab" />
                    </center>
                </p:panel>
                <br/><br/><br/>
                <p:dataTable id="Tab" rowStyleClass="tabla" style="font-size: 14px;" paginator="true" paginatorPosition="bottom" rows="10" value="#{beanAlumno.listAl}" var="listAl" >
                    <p:columnGroup type="header">
                        <p:row>
                            <p:column headerText="Nie"  styleClass="columna"/>
                            <p:column headerText="Alumno"  styleClass="columna"/>
                            <p:column headerText="Email"  styleClass="columna"/>
                            <p:column headerText="Edad"  styleClass="columna"/>
                            <p:column headerText="Fecha de nacimiento"  styleClass="columna"/>
                            <p:column headerText="Fecha de Registro"  styleClass="columna"/>
                            <p:column headerText="Usuario"  styleClass="columna"/>
                            <p:column headerText="Escuela"  styleClass="columna"/>
                            <p:column headerText="Grado"  styleClass="columna"/>
                            <p:column headerText="Editar"  styleClass="columna"/>
                            <p:column headerText="Borrar"  styleClass="columna"/>
                        </p:row>
                    </p:columnGroup>
                    <p:column  styleClass="columna">
                        <h:outputText value="#{listAl.nie}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.apellido}, #{listAl.nombre}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.email}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.edad}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.fechaNacimiento}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.fechaRegistro}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.idAcceso.usuario}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.codigoEscuela.nombreEscuela}" />
                    </p:column>
                     <p:column styleClass="columna">
                         <h:outputText value="#{listAl.grado.grado}" />
                    </p:column>
                    <p:column styleClass="columna">
                        <p:commandButton value="Editar" styleClass="Ac" icon="ui-icon-pencil" actionListener="#{beanAlumno.modificar(listAl)}" oncomplete="PF('wdlgdesplegable').show();" update=":desplegable msg"/>
                    </p:column>
                    <p:column styleClass="columna">
                        <p:commandButton value="Eliminar" styleClass="btnBo" icon="ui-icon-close" actionListener="#{beanAlumno.eliminar(listAl)}" update="Tab,msg"/>
                    </p:column>
                </p:dataTable>
            </center>
        </h:form>
        <p:dialog id="desplegable" style="text-align: center;background-image: url(imagenes/fondos/fondo4.jpg)" header="Actualizar" widgetVar="wdlgdesplegable">
            <h:form>
                <center>
                        <h:outputLabel value="Nie: " /><p:spacer width="20" height="15"/>
                        <p:inputText value="#{beanAlumno.alumnos.nie}" readonly="#{not facesContext.postback or facesContext.renderResponse}"/>
                        <br /><br/>
                        <h:outputLabel value="Acceso " /><p:spacer width="20" height="15"/>
                        <p:inputText value="#{beanAlumno.alumnos.idAcceso.idAcceso}" readonly="#{not facesContext.postback or facesContext.renderResponse}"/>
                        <br /><br/>
                        <h:outputLabel value="Nombre: "/> <p:spacer width="180" height="15" />
                        <h:outputLabel value="Apellido: " /><br/>
                        
                        <p:inputText value="#{beanAlumno.alumnos.nombre}" readonly="#{not facesContext.postback or facesContext.renderResponse}" /><p:spacer width="30" />
                        <p:inputText value="#{beanAlumno.alumnos.apellido}" readonly="#{not facesContext.postback or facesContext.renderResponse}" />
                        <br/><br/>
                        
                        <h:outputLabel value="Email: " /><p:spacer width="20" height="15" />
                        <p:inputText value="#{beanAlumno.alumnos.email}" style="width:  350px;"/>
                        <p:spacer width="20" height="15"/>
                        <h:outputLabel value="Direccion: "/>
                        <p:inputText value="#{beanAlumno.alumnos.direccion}" style="width:  350px;" />
                        <br/><br/>
                        
                        <h:outputLabel value="Edad: "/><p:spacer width="20" height="15"/><p:inputText size="1" maxlength="4" value="#{beanAlumno.alumnos.edad}" />
                        <p:spacer width="25" />
                        <h:outputLabel value="Fecha de Nacimiento:" /><p:spacer width="20" height="15"/><p:inputText size="6" value="#{beanAlumno.alumnos.fechaNacimiento}" readonly="#{not facesContext.postback or facesContext.renderResponse}" />
                        <p:spacer width="25" />
                        <h:outputLabel value="Fecha de registro: " /><p:spacer width="20" height="15"/><p:inputText size="6" value="#{beanAlumno.alumnos.fechaRegistro}" readonly="#{not facesContext.postback or facesContext.renderResponse}" />
                        <br/><br/>
                        
                        <h:outputLabel value="Escuela: "/><p:spacer width="20"/>
                        <p:inputText value="#{beanAlumno.alumnos.codigoEscuela.codigoEscuela}" style="width:  350px;" />
                        <p:spacer width="30" />
                        <h:outputLabel value="Grado: "/><p:spacer width="20"/>
                        <p:inputText value="#{beanAlumno.alumnos.grado.grado}" style="width:  350px;" />
                        <br/><br/>
                        <p:commandButton value="Guardar" actionListener="#{beanAlumno.actualizar()}" update=":fo:Tab desplegable,msg" />
                    </center>
            </h:form>
        </p:dialog>
    </h:body>
</html>
