<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <style type="text/css">
            form .styleGreen {    
                background-color: #3bbd4b !important;
                font-family: 'Berlin Sans FB Demi' !important;
            }
            form .panelBlue{
                background-color: #66ccff !important;
                font-family: fantasy !important;
            }
            form .tabla{
                background-color: #00cc99 !important;
                font-family: 'Berlin Sans FB Demi' !important;
                font-size: 18px !important;
            }
        </style>
        <title>Nivel</title>
    </h:head>
    <h:body>

        <h:form id="fo">
            <p:panel id="horizontal" styleClass="panelBlue" header="" style="text-align: center" toggleable="true" toggleOrientation="horizontal" collapsed="true">
                <p:spacer width="170" height="15" />
                <h:outputLabel value="Grado: " /> <p:inputText value="#{beanNivel.nivel.grado}" ><p:keyFilter regEx="/[a-z_]/i" /></p:inputText>
                <p:spacer width="90" height="15" />
                <h:outputLabel value="Escuela: " /> 
                <h:selectOneMenu  value="#{beanNivel.nivel.codigoEscuela.codigoEscuela}" style="width:225px" >
                    <f:selectItem itemValue="" itemLabel="Escoger Escuela" />
                    <f:selectItems value="#{beanNivel.listaE}" var="listaE" itemLabel="#{listaE.nombreEscuela}" itemValue="#{listaE.codigoEscuela}" />
                </h:selectOneMenu>
                <p:spacer width="120" height="15" />
                <p:commandButton value="Guardar"  styleClass="styleGreen" actionListener="#{beanNivel.agregar()}" update="table,fo"/>
            </p:panel>
            <br></br>
            <br></br>


            <p:dataTable  id="table" styleClass="tabla" value="#{beanNivel.lista}" var="lista" paginator="true" rows="10" >
                <p:columnGroup type="header">
                    <p:row>
                        <p:column headerText="Grado" />
                        <p:column headerText="Escuela"/>
                        <p:column/>
                        <p:column/>
                    </p:row>
                </p:columnGroup>
                <p:column >
                    <p:outputLabel value="#{lista.grado}" />
                </p:column>
                <p:column>
                    <p:outputLabel value="#{lista.codigoEscuela.nombreEscuela}" />
                </p:column>
                <p:column>
                    <p:commandButton value="Editar" icon="ui-icon-pencil" actionListener="#{beanNivel.modificar(lista)}" oncomplete="PF('wdlgdesplegable').show();" update=":desplegable"/>
                </p:column>
                <p:column >
                    <p:commandButton value="Eliminar" actionListener="#{beanNivel.eliminar(lista)}" icon="ui-icon-close" update="table" />
                </p:column>
            </p:dataTable>
        </h:form>

        <p:dialog id="desplegable" header="Actualizar" widgetVar="wdlgdesplegable">
            <h:form style="text-align: center;">
                <h:outputLabel value="Grado: " /> <br />
                <p:inputText value="#{beanNivel.nivel.grado}" readonly="#{not facesContext.postback or facesContext.renderResponse}" /><br /><br />
                <h:outputLabel value="Escuela: " /> <br />
                <h:selectOneMenu  value="#{beanNivel.nivel.codigoEscuela.codigoEscuela}" style="width:225px" >
                    <f:selectItems value="#{beanNivel.listaE}" var="listaE" itemLabel="#{listaE.nombreEscuela}" itemValue="#{listaE.codigoEscuela}" />
                </h:selectOneMenu><br />
                <br /><br /><br />
                <p:commandButton value="Actualizar" actionListener="#{beanNivel.actualizar()}" update=":fo:table desplegable"/>
            </h:form>
        </p:dialog>
    </h:body>
</html>
